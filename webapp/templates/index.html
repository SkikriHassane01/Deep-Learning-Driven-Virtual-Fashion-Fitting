{% extends 'base.html' %}

{% block title %}Virtual Fashion Try-On{% endblock %}

{% block content %}
<!-- Enhanced Hero Section -->
<section class="hero-section section position-relative">
    <div class="floating-fashion-elements">
        <div class="floating-element"><i class="bi bi-stars"></i></div>
        <div class="floating-element"><i class="bi bi-palette"></i></div>
        <div class="floating-element"><i class="bi bi-magic"></i></div>
        <div class="floating-element"><i class="bi bi-brush"></i></div>
        <div class="floating-element"><i class="bi bi-lightning"></i></div>
        <div class="floating-element"><i class="bi bi-droplet"></i></div>
    </div>
    <div class="container position-relative">
        <div class="row align-items-center">
            <!-- Content Column -->
            <div class="col-lg-6 col-md-7">
                <div class="hero-content">
                    <h1 class="hero-title mb-4">
                        Virtual Fashion Try-On
                    </h1>
                    <p class="hero-subtitle mb-4">
                        Transform your look with AI-powered fashion visualization. Upload your photo and describe the clothing you want to try on!
                    </p>
                    
                    <!-- Quick Action Buttons -->
                    <div class="hero-actions d-flex flex-wrap gap-3 mb-4">
                        {% if user.is_authenticated %}
                            <a href="{% url 'generate' %}" class="btn btn-primary btn-lg">
                                <i class="bi bi-magic me-2"></i>
                                Try On Now
                            </a>
                            <a href="{% url 'profile' %}" class="btn btn-outline-primary btn-lg">
                                <i class="bi bi-person-circle me-2"></i>
                                View Profile
                            </a>
                        {% else %}
                            <a href="#login-section" class="btn btn-primary btn-lg">
                                <i class="bi bi-arrow-right me-2"></i>
                                Get Started
                            </a>
                        {% endif %}
                    </div>
                    
                    {% if not ai_available %}
                        <div class="alert alert-warning d-inline-flex align-items-center" role="alert">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i>
                            AI models are not available. Using fallback mode for demonstration.
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Professional Business Model Column -->
            <div class="col-lg-6 col-md-5 d-none d-md-block">
                <div class="hero-image-container">
                    <div class="hero-image-wrapper">
                        <img src="/static/images/hero-man.png" 
                             alt="Handsome Young Man" 
                             class="hero-image">
                        <div class="hero-image-overlay"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- How It Works Section -->
<section class="how-it-works-section section section-light">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="text-center mb-5 animate-on-scroll">
                    <h2 class="section-title">How It Works</h2>
                    <p class="section-subtitle">Three simple steps to transform your style</p>
                </div>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-4 col-md-6">
                <div class="feature-card animate-on-scroll">
                    <div class="feature-icon">
                        <i class="bi bi-cloud-upload"></i>
                    </div>
                    <h4 class="feature-title">1. Upload Photo</h4>
                    <p class="feature-description">Take or upload a clear photo of yourself. Our AI works best with full-body shots and good lighting.</p>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6">
                <div class="feature-card animate-on-scroll">
                    <div class="feature-icon">
                        <i class="bi bi-palette"></i>
                    </div>
                    <h4 class="feature-title">2. Describe Outfit</h4>
                    <p class="feature-description">Tell us what you want to try on. Be specific about colors, styles, and clothing types for best results.</p>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6">
                <div class="feature-card animate-on-scroll">
                    <div class="feature-icon">
                        <i class="bi bi-magic"></i>
                    </div>
                    <h4 class="feature-title">3. Get Results</h4>
                    <p class="feature-description">Watch as our AI generates a realistic visualization of how the outfit looks on you in seconds.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Try On New Outfit Section -->
{% if user.is_authenticated %}
<section class="try-on-section section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="text-center animate-on-scroll">
                    <div class="feature-icon mx-auto mb-4 cta-icon">
                        <i class="bi bi-magic"></i>
                    </div>
                    <h2 class="section-title mb-3">Try On New Outfit</h2>
                    <p class="section-subtitle mb-4">Ready to see how you look in your dream outfit?</p>
                    <a href="{% url 'generate' %}" class="btn btn-primary btn-lg">
                        <i class="bi bi-magic me-2"></i>
                        Start Virtual Try-On
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- Login/Register Call-to-Action Section -->
{% if not user.is_authenticated %}
<section id="login-section" class="auth-cta-section section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="text-center animate-on-scroll">
                    <div class="feature-icon mx-auto mb-4 cta-icon">
                        <i class="bi bi-person-check"></i>
                    </div>
                    <h2 class="section-title mb-3">Ready to Transform Your Style?</h2>
                    <p class="section-subtitle mb-4">Sign in or create an account to access our AI-powered virtual try-on experience</p>
                    
                    <div class="d-flex gap-3 justify-content-center flex-wrap">
                        <a href="{% url 'login' %}" class="btn btn-primary btn-lg">
                            <i class="bi bi-box-arrow-in-right me-2"></i>
                            Sign In
                        </a>
                        <a href="{% url 'register' %}" class="btn btn-outline-primary btn-lg">
                            <i class="bi bi-person-plus me-2"></i>
                            Create Account
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}
{% endblock %}

{% block extra_js %}
<script>
// Optimized homepage script
document.addEventListener('DOMContentLoaded', function() {
    // Simple animation system
    const animateElements = document.querySelectorAll('.animate-on-scroll');
    
    // Create intersection observer once
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, { threshold: 0.15 });
    
    // Set up all animated elements
    animateElements.forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'all 0.7s ease';
        observer.observe(el);
    });
    
    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
});
</script>
{% endblock %}
