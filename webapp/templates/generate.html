{% extends 'base.html' %}

{% block title %}AI Virtual Try-On Generator - Virtual Fashion{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/generate.css">
{% endblock %}

{% block content %}
<!-- Generate Page Hero Section - Fixed -->
<section class="hero-section section generate-hero" style="padding: 6rem 0 3rem; background: var(--gradient-hero); min-height: 40vh; display: flex; align-items: center; position: relative; overflow: hidden;">
    <div class="floating-fashion-elements">
        <div class="floating-element"><i class="bi bi-stars"></i></div>
        <div class="floating-element"><i class="bi bi-palette"></i></div>
        <div class="floating-element"><i class="bi bi-magic"></i></div>
        <div class="floating-element"><i class="bi bi-brush"></i></div>
        <div class="floating-element"><i class="bi bi-cloud-upload"></i></div>
        <div class="floating-element"><i class="bi bi-chat-text"></i></div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="text-center">
                    <div class="generate-header-icon mb-4">
                        <i class="bi bi-magic"></i>
                    </div>
                    <h1 class="hero-title" style="font-size: clamp(2.5rem, 5vw, 3.5rem); margin-bottom: 1.5rem; color: white; opacity: 1;">
                        Create Your Virtual Try-On
                    </h1>
                    <p class="hero-subtitle" style="max-width: 700px; margin: 0 auto 3rem; color: rgba(255, 255, 255, 0.9); opacity: 1;">
                        Transform your style with AI-powered virtual fashion. Upload your photo, describe your desired outfit, 
                        and watch our advanced technology create realistic try-on results in minutes.
                    </p>
                    
                    <!-- Simple Process Overview -->
                    <div class="overview-steps">
                        <div class="overview-step">
                            <div class="step-icon">
                                <i class="bi bi-cloud-upload"></i>
                                <span>1</span>
                            </div>
                            <p>Upload Photo</p>
                        </div>
                        <div class="overview-step">
                            <div class="step-icon">
                                <i class="bi bi-palette"></i>
                                <span>2</span>
                            </div>
                            <p>Choose Template</p>
                        </div>
                        <div class="overview-step">
                            <div class="step-icon">
                                <i class="bi bi-chat-text"></i>
                                <span>3</span>
                            </div>
                            <p>Describe Outfit</p>
                        </div>
                        <div class="overview-step">
                            <div class="step-icon">
                                <i class="bi bi-magic"></i>
                                <span>4</span>
                            </div>
                            <p>Get Results</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Main Generation Interface -->
<section class="section" style="padding: 3rem 0 4rem; background: transparent;">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                
                <!-- Progress Display (Hidden by default) -->
                <div class="simple-progress-container" id="progressContainer" style="display: none;">
                    <div class="progress-content">
                        <div class="progress-icon">
                            <i class="bi bi-magic"></i>
                        </div>
                        <h3 class="progress-title">Generating Your Virtual Try-On</h3>
                        <p class="progress-subtitle">Please wait while our AI creates your personalized result...</p>
                        
                        <div class="simple-progress-bar">
                            <div class="progress-bar-fill"></div>
                        </div>
                        
                        <div class="progress-phrase">
                            <p class="motivational-text">✨ Creating magic with AI ✨</p>
                            <p class="sub-text">Your personalized virtual try-on is being crafted...</p>
                        </div>
                        
                        <p class="progress-message" id="progressMessage">Processing in progress...</p>
                    </div>
                </div>

                <!-- Upload Form Container -->
                <div class="upload-form-container">
                    <form method="post" action="{% url 'upload' %}" enctype="multipart/form-data" id="uploadForm">
                        {% csrf_token %}
                        
                        <!-- Step 1: Photo Upload -->
                        <div class="mb-4">
                            <h5 class="form-section-title">
                                <i class="bi bi-cloud-upload me-2"></i>Step 1: Upload Your Photo
                            </h5>
                            <div class="file-upload-wrapper">
                                <input type="file" 
                                       name="original_image" 
                                       id="imageUpload" 
                                       accept="image/*" 
                                       required 
                                       class="file-input">
                                <div class="file-upload-placeholder">
                                    <i class="bi bi-cloud-upload-fill"></i>
                                    <span>Choose a photo or drag and drop</span>
                                    <p>Support for JPG, PNG images up to 10MB</p>
                                </div>
                            </div>
                        </div>

                        <!-- Step 2: Template Selection -->
                        <div class="mb-4">
                            <h5 class="form-section-title">
                                <i class="bi bi-palette me-2"></i>Step 2: Choose a Template (Optional)
                            </h5>
                            <div class="row g-3">
                                <div class="col-lg-3 col-md-4 col-sm-6">
                                    <div class="template-card" onclick="useTemplate('A stylish red evening dress with long sleeves and elegant design')">
                                        <div class="template-icon">
                                            <i class="bi bi-stars"></i>
                                        </div>
                                        <h6>Evening Dress</h6>
                                        <p>Red elegant dress with long sleeves</p>
                                    </div>
                                </div>
                                
                                <div class="col-lg-3 col-md-4 col-sm-6">
                                    <div class="template-card" onclick="useTemplate('A casual blue denim jacket with vintage style and comfortable fit')">
                                        <div class="template-icon">
                                            <i class="bi bi-layers"></i>
                                        </div>
                                        <h6>Denim Jacket</h6>
                                        <p>Casual blue vintage jacket</p>
                                    </div>
                                </div>
                                
                                <div class="col-lg-3 col-md-4 col-sm-6">
                                    <div class="template-card" onclick="useTemplate('A formal black business suit with tailored fit and professional appearance')">
                                        <div class="template-icon">
                                            <i class="bi bi-briefcase"></i>
                                        </div>
                                        <h6>Business Suit</h6>
                                        <p>Professional black formal suit</p>
                                    </div>
                                </div>
                                
                                <div class="col-lg-3 col-md-4 col-sm-6">
                                    <div class="template-card" onclick="useTemplate('A trendy white crop top with modern design and comfortable fabric')">
                                        <div class="template-icon">
                                            <i class="bi bi-heart"></i>
                                        </div>
                                        <h6>Crop Top</h6>
                                        <p>Trendy white modern crop top</p>
                                    </div>
                                </div>
                                
                                <div class="col-lg-3 col-md-4 col-sm-6">
                                    <div class="template-card" onclick="useTemplate('A comfortable black hoodie with modern streetwear design')">
                                        <div class="template-icon">
                                            <i class="bi bi-shirt"></i>
                                        </div>
                                        <h6>Hoodie</h6>
                                        <p>Modern black streetwear hoodie</p>
                                    </div>
                                </div>
                                
                                <div class="col-lg-3 col-md-4 col-sm-6">
                                    <div class="template-card" onclick="useTemplate('An elegant white wedding dress with flowing fabric and beautiful details')">
                                        <div class="template-icon">
                                            <i class="bi bi-flower1"></i>
                                        </div>
                                        <h6>Wedding Dress</h6>
                                        <p>Elegant white wedding gown</p>
                                    </div>
                                </div>
                                
                                <div class="col-lg-3 col-md-4 col-sm-6">
                                    <div class="template-card" onclick="useTemplate('A stylish leather jacket with modern biker design and premium finish')">
                                        <div class="template-icon">
                                            <i class="bi bi-fire"></i>
                                        </div>
                                        <h6>Leather Jacket</h6>
                                        <p>Premium black leather jacket</p>
                                    </div>
                                </div>
                                
                                <div class="col-lg-3 col-md-4 col-sm-6">
                                    <div class="template-card" onclick="useTemplate('A vibrant summer dress with floral patterns and light fabric')">
                                        <div class="template-icon">
                                            <i class="bi bi-flower2"></i>
                                        </div>
                                        <h6>Summer Dress</h6>
                                        <p>Floral pattern summer dress</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 3: Clothing Description -->
                        <div class="mb-4">
                            <h5 class="form-section-title">
                                <i class="bi bi-chat-square-text me-2"></i>Step 3: Describe Your Desired Outfit
                            </h5>
                            <textarea name="clothing_prompt" 
                                      id="clothingDescription" 
                                      class="generate-form-control" 
                                      rows="4" 
                                      placeholder="Describe the clothing you want to try on... e.g., 'a red dress with long sleeves', 'a blue denim jacket', 'a formal black suit'"
                                      required></textarea>
                            <small class="form-text text-muted">
                                Be specific about colors, style, and details for the best results.
                            </small>
                        </div>

                        <!-- Step 4: Generate Button -->
                        <div class="text-center">
                            <button type="submit" 
                                    id="submitBtn" 
                                    class="btn-generate">
                                <i class="bi bi-magic me-2"></i>
                                <span>Generate Virtual Try-On</span>
                            </button>
                            <p class="submit-note mt-2">
                                <small class="text-muted">Processing typically takes 2-3 minutes</small>
                            </p>
                        </div>
                        
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="/static/js/generate-page.js"></script>
{% endblock %}
